% !TEX encoding = IsoLatin2

% LaTeX Template Version 3.1,  JuLY 2011
% by Dr. Andreas Drauschke (andreas.drauschke@technikum-wien.at) and Dr. Susanne Teschl (susanne.teschl@technikum-wien.at)
% minor adaptations by Harald Stockinger (harald.stockinger@technikum-wien.at)
%
% Adaptions for MR done by M. Widrich (BMR6) in January 2012, tested by W. Kubinger in March 2012
%
% Fragen zu den BMR- und MMR-Vorlagen bitte an Wilfried Kubinger (kubinger@technikum-wien.at) richten.
%
% Angepasst an MMR4, SS2013: 27.2.2013, WK
%


\documentclass[a4paper,bibtotoc,oneside]{scrbook}
% For short papers the documentclass "scrartcl" is sufficient. In this case the highest sectioning structure is "section" ("chapter" does not exist).
% \documentclass[a4paper,bibtotoc,oneside]{scrartcl}

\usepackage{hyperref}

\usepackage[ansinew]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[ngerman,english]{babel}
\selectlanguage{english}
\usepackage{amsmath,amssymb,amsfonts,amstext}

\usepackage{fancyhdr}
\lfoot[\fancyplain{}{}]{\fancyplain{}{}}
\rfoot[\fancyplain{}{}]{\fancyplain{}{}}
\cfoot[\fancyplain{}{\footnotesize\thepage}]{\fancyplain{}{\footnotesize\thepage}}
\lhead[\fancyplain{}{\footnotesize\nouppercase\leftmark}]{\fancyplain{}{}}
\chead{}
\rhead[\fancyplain{}{}]{\fancyplain{}{\footnotesize\nouppercase\sc\leftmark}}

\usepackage{color}

\usepackage{helvet}
\renewcommand{\familydefault}{cmss}

\usepackage[pdftex]{graphicx}

\usepackage{harvard}

\usepackage{array}

\setlength{\textheight}{225mm}
\setlength{\textwidth}{1.05\textwidth}


\tolerance = 9999
\sloppy

% Anpassung einiger "Uberschriften
\renewcommand\figurename{Figure}
\renewcommand\tablename{Table}

% Abbildungen, Gleichungen und Tabellen werden fortlaufend nummeriert
\renewcommand\thefigure{\arabic{figure}}
\renewcommand\thetable{\arabic{table}}
\renewcommand\theequation{\arabic{equation}}
\usepackage{remreset}
\makeatletter
  \@removefromreset{figure}{chapter}
  \@removefromreset{table}{chapter}
  \@removefromreset{equation}{chapter}
\makeatother

%Zum korrekten Formatieren von Verzeichnissen
\usepackage{tocloft}
\renewcommand{\cftfigpresnum}{Figure~}
\renewcommand{\cfttabpresnum}{Table~}
\renewcommand{\cftfigaftersnum}{:}
\renewcommand{\cfttabaftersnum}{:}
\setlength{\cftfignumwidth}{2.5cm}
\setlength{\cfttabnumwidth}{2.5cm}
\setlength{\cftfigindent}{0cm}
\setlength{\cfttabindent}{0cm}

\begin{document}

%Festlegen des Zitier-Standards
\bibliographystyle{HarvardFHTWMR_V1_2e}%Zitierstandard FH Technikum Wien, Studiengang Mechatronik/Robotik
\citationstyle{dcu}%Correct citation-style (Harvardand, ";" between citations, "," between author and year)
\citationmode{abbr}%use "et al." with first citation
    \newcommand{\citepic}[1]{(Source: \protect\cite{#1})}%Zitat: Bild
    \newcommand{\citefig}[2]{(Source: \protect\cite{#1}, p. #2)}%Zitat: Bild aus Dokument
    \newcommand{\citefigm}[2]{(Source: taken with modification from \protect\cite{#1}, p. #2)}%Zitat: modifiziertes Bild aus Dokument
    \newcommand{\citep}{\citeasnoun}%In-Line Zitiat entweder mit \citep{} oder \citeasnoun{}
    \newcommand{\acessedthrough}{Available at:}%Für URL-Angabe
    \newcommand{\acessedthroughp}{Available through:}%Für URL-Angabe (Geschützte Datenbank, Zugriff durch FH)
    \newcommand{\acessedat}{Accessed}%Für URL-Datum-Angabe
    \newcommand{\singlepage}{p.}%Für Seitenangabe (einzelne Seite)
    \newcommand{\multiplepages}{pp.}%Für Seitenangabe (mehrere Seiten)
    \newcommand{\chapternr}{Ch.}%Für Kapitelangabe
    \renewcommand{\harvardand}{\&}%Harvardand in Zitaten
    \newcommand{\abstractonly}{Abstract only}
    \newcommand{\edition}{~edition}%Edition -> note, that you have to write "edition = {2nd},"!

\pagestyle{fancy}

% title page:
\thispagestyle{empty}
\begin{picture}(0,0)
\color{white}\sffamily
\put(-101,-749){\includegraphics[width=1.002\paperwidth, height=\paperheight]{BM_2011.pdf}}
\put(220,-670){\includegraphics[width=0.5\textwidth]{FHTW_Logo_4c.pdf}}
\put(-30, -20){\bfseries\huge BACHELOR'S PAPER}
% insert degree program:
\put(-30,-50){\Large Degree Program Mechatronic/Robotic}


\put(-32,-150){
\begin{minipage}{14cm}
\bfseries\huge
% insert title:
Event synchronization for micro controller in a local network
\end{minipage}
}
% insert author:
\put(-30,-250){\large By: Birgit Schreiber}
% insert student ID:
\put(-30,-270){\large Student Number: mr11b068}
% insert supervisor:
\put(-30,-310){\large Supervisor: Dipl. Ing. Dipl. Ing. Zoltan Puskas}
\put(-30,-350){\large Vienna, \today}
\color{black}
\end{picture}

\newpage

\section*{Declaration}\thispagestyle{empty}
I confirm that this paper is entirely my own work. All sources and quotations have been fully acknowledged in the appropriate places
with adequate footnotes and citations. Quotations have been properly acknowledged and marked with appropriate punctuation.
The works consulted are listed in the bibliography. This paper has not been submitted to another examination panel in the same or a
similar form, and has not been published. I declare that the present paper is identical to the version uploaded.
\\[5\baselineskip]
\rule{5cm}{0.2pt}\hfill\rule{5cm}{0.2pt}\\
\phantom{Datum }Place, Date\hfill Signature\hspace{15mm}

\newpage

% German abstract:
% \section*{Kurzfassung}\thispagestyle{empty}
% Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text ...
% \\ \vfill
% Please insert 3-5 German keywords that characterize the thesis:
% \paragraph*{Schlagw{\"o}rter:} Schlagwort 1, Schlagwort 2, Schlagwort 3, Schlagwort 4, Schlagwort 5

\newpage

% English abstract:
\section*{Abstract}\thispagestyle{empty}
Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text ...
\\ \vfill
% Please insert 3-5 English keywords that characterize the thesis:
\paragraph*{Keywords:} time, synchronization, micro controller, network, package 
 
\newpage

\section*{Acknowledgments}
\thispagestyle{empty}
First I would like to thank the company "Dension" for giving me the opportunity to do an internship. The internship woke my interest for software development
and digital science. 
I also want to thank IAEST-Budapest for organizing my accommodation and all the great spare time activities. It was a great experience, to do an internship
in a foreign country and experience a other culture.
Especially I want to thank my mentor Zoltan Puskas, who took a lot of time and effort to supervise me during my internship. He thought me a lot and his inspired 
me in many ways.
\newpage

\tableofcontents\thispagestyle{empty}

\newpage

\setcounter{page}{1}
\chapter[Introduction]{Introduction}

This thesis is a report about a projects which was carried out during a internship at the company "Dension" in Budapest. 
This internship was part of the B.Sc. program Mechanics/Robotics at the university of applied science Technikum-Wien. 
The company "Dension" is an automotive electronic company which sells micro controllers which are mainly used as multimedia gateways for cars.
These micro controllers are also used for playing video and audio content on screens which are located in shopping centers for example.
During my internship I worked in the development department of the company, I got an good insight into software development for micro controllers with 
limited resources and in UNIX based operation systems.

The topic of the thesis "event synchronization for micro controller" was a feature which was requested from costumers for the products the 
company produces. This topic was given to me because synchronization of digital devices is a common problem in computer science and as well in robotic, so I could
profit a lot form it. The problem will be described more in detail at point 1.3.

\section[Subject area]{Subject area - synchronization in digital science}

Synchronization is a common problem in computer science and engineering. The internal clocks of computers and micro controllers are not very accurate,
 the problem is that that after some time all clocks differ due to cock drift. This is caused by different rates of the clocks with which time is counted. 
The synchronization problem is a problem which occurs in many technical applications. There are several problems which are caused by the fact that clocks on different devices are not in sync, specially in distributed systems which should fulfill a shared task. 

\section[First Section]{Motivation}

%according problem description, requested by costumer
%learning new things and getting training as well - Something in general about time sync why it is important and why it is also relevant for mechatronic

\section[Problem description]{Problem description}

%design, implementation, integration, testing - till release

This microcontrollers work on a Unix based operating system which is specially desigend for their purpose and application. These microcontroller have very limited resources, like processing power and RAM. The company offers different models, the most sold model is the MPX. The MPX has the following specifiactions:
Kernl: Linux (32 Bit)
CPU: 720 MHz
RAM: 256MB@360MHz
Flash 1MB to 8MB
32MB @ SD-Card
The company got the request form several of their customers that they would liket to syncronize events on the deivices wich are connected in a local network. This feature was requested for example to start videos in sync on monitors wich are accessed by different microcontrollers. So the company searched for a possibility to meet the needs of the costumer and syncronize diffrent devices but they alos had to consinder the resurces availibe on the deivces. 

\section[State of the art ]{State of the art - existing synchronization solutions}

There are already several solution for the synchronization problem. The first step to do, was to do an research on existing solution 
and to understand the implementation and algorithm of these solution. On basis of this knowledge it was consider which parts of existing solution 
could be used and what has to be implemented to find a optimal solution for the given problem.

\subsection[NTP]{Network Time Protocol (NTP)}

One solution for the synchronization problem is the Network Time Protocol (NTP) which is a networking protocol for clock synchronization for 
devices which are connected over a network. NTP is mainly used to synchronize computers over the Internet to high-precision timekeeping devices like atomic clocks.
These clocks can measure time very accurate and are used as reference. Implementations of NTP transmit 64-bit timestamps via User Datagram Protocol to 
the devices which should be adjusted. Than the clock on the device is set to the correct value or the clock rate is fastened or slowed down. 
If the clock rate is fastened or slowed it takes some time till the clock has the correct time.

For the given task simply setting up an implementation of NTP was not an option. This was due to several reasons. 
From the task description it was clear that a connection to the Internet will not be provided in most of the application cases. Also the fact that
NTP adjusts the clock on the device was a reason why it was not considered as solution for the given task, because the clocks have very in some 
cases very different rates and the clocks would be out of sync within a short period and a continuous synchronization was for the task, 
which is described in detail in the next point, not necessary. 

A further point which had to be taken into account when considering different solutions was that it was very important for the company, 
that the synchronization could be fully integrated in the already existing system with as less alterations of the existing structures as possible.

All considerations of the above described facts and problems led to the decision to design and implement a new simple protocol based on a similar algorithm as NTP
which is suitable for the task and also takes the integration of the implementation in the already existing programs and structures in account. 

Also other established time sync solutions like SNTP and PTP where considered but in conclusion for the given task they had the same weaknesses as described above. 

As described above a protocol should be designed which has for the task relevant benefits of the algorithm which is used in NTP. For that reason the way how NTP
works and how it is implemented was analyzed.

\subsection[NTP - How it works]{NTP - How it works}

In NTP packets for Satrum 0 clocks are transmitted via internet with UDP packages. To take the transmission delay and the variance
in transmission delays in account the delay form several runs is calculated and averaged with a modified version of Marzullo's algorithm". The time which is needed
till the message from the instance with the accurate clock is deliver to the device which should be adjusted is called transmission delay. The transmission
delay can not be measured directly because the internal clocks of the two instances have different times and there is always an offset. To be able to determine 
the transmission delay the round trip delay is measured. To measure the round trip delay a package is delivered from the first instance to the target device
and than the target device answerers to the first instance, the time from sending the first message till receiving the answer is called the round trip delay.
Every time when a packet was sent or received a timestamp is saved, from these timestamps the round trip delay and the offset can be calculated.

The round trip delay $\delta$ is calculated: 
$$\delta=(t_3-t_0)-(t_2-t_1)$$
where\\*
$t_0$ is the timestamp when the packet was sent\\*
$t_1$ is the timestamp when the packet was received from the device\\*
$t_2$ is the timestamp when the response packet was sent from the device\\*
$t_3$ is the timestamp of the response packet reception.\\*

The offset $\Theta$ is calculated:
$$\Theta=\frac{(t_1-t_0)+(t_2-t_3)}{2}$$

With the knowledge of this tow variables the clock frequency is adjusted to reduce the offset.

\chapter[Second Chapter]{Body}

\section[general design]{General design of the protocol}

\subsection[protocol]{protocol - messgaes}

Messages:

Update (from master):
The updates are broadcasted by the master periodically. Each device in the network receives the update from the master. Based on the content of the update the message is pocessed from the other device and slaves will reply. 

The update contains the folloing componentes:

group ID: in the update the group ID of the master is transmitted. If the message is received from an other device first the group ID of the sender is compared to the onw group ID, if the two gorup IDs are not matching the message is not proccessed any further.

force: if a device was specifyed to be master in the configuration file, this variable is set to on (otherwise it is zero). For slaves wich receive the update this parameter is not relevant. If an update is received from an other master and the group IDs are matching the each master will compare the own IP to the one from the sender and the force parmeter. Based on this comparion it is deceided wich master remains and wich one switches back to slave mode or exist (see master selection algoritm). 

prelaod ID: the preload ID indicates if a new preload request was received by the master from the controller. (See syncd - controller comunication). After the slave received the update, the slave compares the current preload ID to the preload ID he processed last, if they are not eqivalent the slave sends a preload request to the controller.

next synced content: this is implemented as an character array wich holds the sync reqeust and the fileneam of the content wich should be synced next. If the slave receives an preloadrequest in the update it writes the sync reqest hold in this string in the fifo for the controller (see comunication with controller).

event ID: the event ID is similar to the preload ID, if the event ID in the update is not equal to the last processed event ID from the slave the slave knows that an event should be initialized. In this case the slave reads his roundtripdelay from the update and the delay till the event and starts a countdown.

t1 in sec and t1 in usec: in this two variables the time when the message was sent is stored. This values are used as message ID and are read by the slave and send back in the answer. This tow values are like all the above desicribed prameters are implemnted as unsigned int. The timeval struct can not be used for this becuase the members tv_sec and tv_usec of the struct timeval are long ints wich have diffrent sizes on diffrent architectures. If longs are send via the network between 32 and 64 bit architectures the values are not received corectlyl. 
 
nextevent in usec: in this variable the time till the next event is stored in microseconds. This value is calculated by the master for every message new if a event should be initialized. This makes sure if one message is lost or not received by the slave that the event still will be initialzed correct on all devices. If an event should be initialized the slave substracts his own roundtrip delay from this value and starts a countdown. 

Array of struct device:
The update also contains the current average roundtrip delay for every slave. This information is organized is a struct called device. The struct contains the IP of ervery slave and the roundtripdelay of the slave. If an event was requested the slave runs through the list and seachrch for it's own IP. After he found himself in the array he subtracts his own roundtripi delay, wich is stored in the struct on the same position in the array, from the nextevent value.

Answer (from slave):
After the slave received an update from a master he replys to it with the answer. The master receives the answer from the slaves and calculates and stores the roundtrip delay for the slave.

The answer contains the folloing componentes:

group ID: the slave also sends his own groupID with the message. The master first compares the group ID only if it is equal to the own group ID the messgae is pocessed further.

t1 in sec and t1 in usec: these two values are used as message ID, the are recevied from the master in the update and copied to the answer. The master can also use them to directly calculate the roundtrip dealy after he received the answer.

Ready ID: after the slave received a prelaodrequest he wirtes the prelaodrequest in the pipe for the cntroller. If the controller has sucessfully preloaded the video he writes ready in the pipe for the syncronisation daemon. If the slave received the ready he copyes the ID of the current preloadrequest in the ready value. The master can compare the ready from the slave to the current preload ID if they are equal the master marks the slave as ready. If all slaves are ready the event can be initialized.




\subsection[master selction]{master selection}

In the network the nodes are all equal but each node has a unique IP address. For the synchronisation a master is needed (for some resons I describe somewhere else later (hopefully)) so a master election has to be part of the program. There are two ways how a master can be found for the syncronisation. The first on is to set a device the master by seting the option in the configuration file or a dynamic election if no master was specified.

Master election: 

1. The user sepcifyes a master: The user has the possibilyty to specify a master in the configuration file. This option can be useful for (I will find a reason). To specify the master the option has to be set in the configuration file. If the configruation option is set there will be no dynamic eletion of the master. If two master has been specified, the specified master with the higher IP continues as master and on the onther deivice the programms exists and the user gets an error message that only one master can be sepcified within the same group is printed on the screen.

dynamic:
f nster was specified by the user the elction of the master is dynamic. The master election is implementet that a master can be found if several devices are turned on at the exact same time and also that if deivices are added later to the system that they accept the current master or that also a specified master can be added later to the system. It is also possible to change the configuration file during the runtime, therefor a option to reconfiur had to be implemented in the programm. The algorithm also accepts a specifyed master wich was reconfigured during runtime.

GARFICS

When the program starts the configuration are read (mention shared library). If in the configuration file the device was specifeid as master. The program starts in master mode and sets the global varibale b_force to 1. This variable is also included in the ubpdates wich are send. If the device was not sepcifyed as master the program starts in slave mode and waits for updates. If a update was received from a master with the same group ID an answer message is sent. If no update is received for some time (witch is defined as L_INT_WAITTIME) the slave mode exists. The master and slave mode are implemented as functions wich are called by  the main function, each mode contains a infinite loop from wich is braked out if a stop siganl, like in the case of the slave function no message received, is received. Befor the function returns all allocated memory is freed by a cleanup handler. In the main function the next mode is called after one mode returned. This is also implemented in a infinite loop so that a slave wich became master can become slave again if for example an ohter master wich was specified by the user accous. If the master function returns all threads wich where called in the fucntion terminate and clean up the memory the allocated and unlock all mutexes they held. After all threads exited the function reurns. If the master was a dynamic elected master he starts in slave mode, if the master was already a specifyed master and the function exited because an other specified master within the same group and an higher IP accourd the program exists after the functin returnd. Also a error message is print to the display and the log, wich informs the user that two specified master are currently in the system.


\section[implementation]{Implementation}

\subsection[communtication]{communication UTP}

The User Datagram Protocol (UDP) a application can send messages to other devices.
UDP uses a simple transission model with a miniumum of protocol mechanism. 
It has no handshaking dialogures, therefore ther is no garantee of delivery, ordering, or duplicate protection. 
UDP is suitable for purposes where error checking and correction is either not necessary or performed in the application. Time-sensetive applications often use UDP because dropping packets is perferable to waiting for a delayed packet. 
If error correction facilityeis are needed at the network interface level, the Transmission Control Protocol (TCP) or Stream Control Transmission Protocol (SCTP) can be used because they are desigend for that purpose. 
But form the requirements form this project it is clear that UDP suites best for this application. 
Ther also other attributes wich make ist suited for this application, it is transacion-oriented, wich make it suitabel for simpllle protocols, it is stateless which makes it suitable for very large numbers of cliens and the like already mentioned th lack of retranzsmission delays makes it suitable for real-time applicaticaton and it is suitable for broadcasting information.

\section[integrateion]{integration}

\section[endproduct user side]{endproduct user side}

\subsection[config params]{config params}

configuration
The user has the possibiliy to set several configuration options for the time synchronisation.
This options can be set in the configuration file. (here it would be nice how the user can set them, of the perspective of the usre)

sync_enabled: this optin secifys if the timesyncronisation is active on the device. A script is run in the background on the divice all the time wich checks for the configuration files and starts programs or stops them if the configuration is changed. After the divices is botted the script reads the confiugfiles once and starts all of the configurateable programs.

sync_group_id: the devices within the same network can be grouped, this option is imported because diffrent devices in the same network can also play dfferen contend wiht the groups zou can specify wicht devices in the nework should be synced togeteher if a syncronzed event is requested. If this configuration option is set to -1 which is also the default configuration the syncdaemon is not executed because the device would not sync to any other device. In the udp packages the the group id is trasmited as well and if the group id of the received masseg does not fit the group id of the divces the package is not process any furtehr.

sync_group_order: wiht the group order a order within the group can be deifend. This can be useful if the deivies should play differnet conted syncronized. For example different screeen wich are orderd next to each other and where each display shows only a part of the same picture (or for example two robots wich coloperate, each one does a different action but the event must be in perfect sync).

sync_forced_master: (here it would be nice to know why the user needs this option) The syncdaemon is implemetnned in this way that one divice is collecting all the data and initalizes the event if requested form the controllerfifo. If this option is not set the master is selected dynamically. If this option is set this devices becomes the amster. If an dynamiacally selecteed master already exists the old master returns to slave mode. If to masters are specifed masters within the same group one of them returns an error and notificates the user that there is only one specified master alowed in one system.

sync_wait: due to the timedrift the played content gets out of sync, if contend should be played in sync and one device has not finished the other contend yet, there are two options. The default option is that the wait option is set. In this case the devieces wati for each other and then start the synced conted this can cause the screan to show no conted for a short period (usually not loger than 1 to 2 seconds) if this should be avoided the the option can be set to false, in this case the device is playing some ohter contetd wich must not be in sync but if all devices finished the old contend the new conted will be interuped. For this option also special conted can be specifed, for this purpuse pictures would be a good option.

%Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text ...

%\subsubsection[First Sub-subsection]{One more level}

%Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text ...

\selectlanguage{ngerman}%Ermöglichung der einfacheren Schreibweise von deutschen Umlauten und Anführungszeichen
\chapter{Anmerkungen zum MR-Zitierstandard}

\section{Verwendung von BibTeX}

Das Literaturverzeichnis wird automatisch generiert. Die Quellenangaben befinden sich in der Datei "`*.bib"'. Zur einfachen Recherche der Literaturquellen-Daten empfiehlt sich auch \textit{google-scholar} (\url{scholar.google.de}). Dazu wird unter den "`Einstellungen"' (rechts oben) die Option  "`\textbf{Bibliographiemanager}: Links zum Importieren von Literaturverweisen in BibTeX anzeigen."' aktiviert. Danach kann eine Literaturquelle gesucht und durch einen Klick auf "`In BibTeX importieren"' die Informationen per Copy\& Paste "ubernommen werden.\\

Kompiliert wird "uber bibtex mit pdflatex oder PS bzw. DVI.
F"ur diese Vorlage z.B. mit pdflatex$\rightarrow$bibtex$\rightarrow$bibtex$\rightarrow$pdflatex$\rightarrow$pdflatex. Die URL-Darstellung und die PDF Eigenschaften sowie die r"omische Nummerierung im PDF vor dem Hauptteil werden mit dem hypersetup bzw. \textbackslash pagenumbering\{\} generiert.\\


\section{Zitate "`im Text"'}

In-Line Zitate k"onnen mit \textbackslash citeasnoun\{Quelle\} oder \textbackslash citep\{Quelle\} durchgef"uhrt werden. Bei mehreren Autoren sind die Quellen-Namen nach der Jahreszahl zu ordnen.

Beispiele f"ur Zitate "`im Text"': nach \citeasnoun{Braun07} und \citeasnoun{Kastner11} oder \citep{Kessler11}.\\

\section{Zitate "`nicht direkt im Text"'}

"`Normale"' Zitate in Klammer werden mit \textbackslash cite\{Quelle\} erzeugt. Bei mehreren Autoren sind die Quellen-Namen durch einen Beistrich zu trennen und nach der Jahreszahl zu ordnen.

Beispiele f"ur Zitate "`nicht direkt im Text"': \cite{Technikum11} bzw. \cite{Bach82,Zettler98,Astrom01}.

\section{Mehrere Werke des selben Autors im selben Jahr}

Bei mehreren Zitaten vom selben Autor im selben Jahr ist die Jahreszahl mit "`a"', "`b"', etc. zu erweitern (siehe *.bib-Datei).

Beispiele f"ur mehrere Zitate des selben Autors im selben Jahr: \cite{Aangerman09a} und \cite{Aangerman09b}.\\

\section{Abk"urzung mit "`et al."'}

Bei mehr als zwei Autoren wird automatisch mit "`et al."' abgek"urzt: \cite{Zettler98}.

\section{Bildbeschriftungen}

Es gibt folgende Markos f"ur Quellenangabe bei fremden Fotos/Bildern:

\begin{itemize}
\item Referenz auf Foto/Bild: \textbackslash citepic\{Hemetsberger07\} $\overset{wird zu}{\Longrightarrow}$ \citepic{Hemetsberger07}
\item Referenz auf Foto/Bild aus Dokument: \textbackslash citefig\{Lund92\}\{99\} $\overset{wird zu}{\Longrightarrow}$ \citefig{Lund92}{99}
\item Referenz auf modifiziertes Foto/Bild aus Dokument: \textbackslash citefigm\{Lund92\}\{150\} $\overset{wird zu}{\Longrightarrow}$ \citefigm{Lund92}{150}
\end{itemize}\ \\

\section{Verf"ugbare Medientypen}
Folgende Medientypen sind zur Zeit m"oglich:
\begin{itemize}
\item Bachelorarbeit/Projektbericht/etc.: \cite{Baldinger10,Piringer11}.
\item Buch: \cite{Aangerman09a,Aangerman09b}.
\item Datenblatt, Leitfaden: \cite{Anglia10,Atmel11}.
\item E-Abstract (Nur Abstract verf"ugbar): \cite{Astrom01}.
\item E-Book: \cite{Kastner11}.
\item E-Book (Zugang durch FH): \cite{Kessler11}.
\item E-Magazin oder E-Journal: \cite{Lund92,Zinner07}.
\item E-Magazin oder E-Journal (Zugang durch FH): \cite{Bach82}.
\item Edited Book: \cite{Braun07,Braun10}.
\item Kapitel in einem Edited Book: \cite{Samson70,Smith75}.
\item Masterthese/Dissertation: \cite{Pohn10,Humenberger11}.
\item Normen: \cite{ISO98}.
\item Paper, Konferenzbeitrag, Journalartikel: \cite{Zettler98,Gesztesy00}.
\item Patent: \cite{Anderson10}.
\item Photographien, Bilder: \cite{Hemetsberger07}.
\item Photographien, Bilder (online): \cite{Dean08}.
\item Website: \cite{Technikum11}.
\item Zeitung: \cite{Slapper05}.
\item Zeitung (online): \cite{Chittenden03}.
\end{itemize}

\selectlanguage{english}%Ende des deutschen Teils

% Literaturverzeichnis
\bibliography{Vorlage_BT_BMR_WS2013_Literatur}
\newpage

% Abbildungsverzeichnis und Tabellenverzeichnis
\begingroup
    \renewcommand*{\addvspace}[1]{}
    \phantomsection
    \addcontentsline{toc}{chapter}{\listfigurename}
    \listoffigures
    \newpage
    \phantomsection
    \addcontentsline{toc}{chapter}{\listtablename}
    \listoftables
\endgroup


% If you use the document class "scrartcl" you need to use  \addsec{List of Abbreviations} instead of \addchap{List of Abbreviations}
\addchap{List of Abbreviations}
\hspace{-17mm}\begin{tabular}{>{\raggedleft}p{0.2\linewidth} p{0.75\linewidth} p{0.1\linewidth}}
www & World Wide Web \\
URL & Uniform Resource Locator
\end{tabular}

\begin{appendix}
\chapter[First Appendix]{Heading of the first appendix}

Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text ...


\chapter[Second Appendix]{Heading of the second appendix}

Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text ...

\end{appendix}

\end{document}
